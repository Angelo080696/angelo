"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9001],{11845:(e,t,r)=>{r.d(t,{CJ:()=>eS,ky:()=>eE,BG:()=>eD,ZC:()=>eO});var n=r(22905),a=r(41885),i=r(70375),o=r(50980),s=r(57398),l=r(82318),d=r(28548),c=r(91892),u=r(70787),x=r(83902),p=r(58497),m=r(99696),g=r(87140),h=r(79096),b=r(66607),f=r(1739),j=r(35623),y=r(21563),v=r(80045),w=r(98088),C=r(45574),k=r(25600),A=r(7631),N=r(59275),M=r(59230),P=r(8327),_=r(46957),R=r(55978),D=r(41896),E=r(15607),S=r(60908),O=r(6029),z=r(66425),I=r(12354),T=r(4522);let G=e=>{let{node:t}=e,{uploadStatus:r}=t.attrs;return(0,O.jsx)(D.VR,{children:(0,O.jsxs)(z.az,{"data-selection-ring":!0,pos:"relative",borderRadius:"md",w:"fit-content",css:{"--media-maxH":"8em"},children:[r===M.A.Error?(0,O.jsx)(T.Pf,{w:"12em",h:"6em"}):(0,O.jsx)(I.FQ,{imageAttrs:t.attrs,"data-drag-handle":!0}),r===M.A.Uploading&&(0,O.jsx)(T.Td,{}),r==M.A.Error&&(0,O.jsx)(T.Hy,{})]})})},U=N.Ay.extend({selectable:!0,draggable:!0,expandable:!0,addNodeView:()=>(0,D.gu)(G,{update:_.z0}),renderHTML(e){let{node:t}=e,r=t.attrs,{src:n,tempUrl:a,uploadStatus:i}=r;return["img",{src:i===M.A.Error?"":n||((null==a?void 0:a.startsWith("http"))?a:""),alt:(0,P.ve)(r),meta:JSON.stringify(r.meta),resize:JSON.stringify(r.resize)}]},parseHTML:()=>[{tag:"img[src]",getAttrs:e=>{let t=e.getAttribute("src");return(0,S.md)(t)?{src:t}:{tempUrl:t}}}],addAttributes:()=>({id:(0,R.e)(w.z),src:{},tempUrl:{},uploadStatus:{},meta:{...(0,E.tb)("meta")},resize:{...(0,E.tb)("resize")}})});var V=r(36811);let B=()=>null,F=e=>{let{selected:t}=e;return(0,O.jsx)(D.VR,{children:(0,O.jsx)(z.az,{pos:"relative",draggable:"true","data-drag-handle":!0,cursor:"grab",contentEditable:"false",position:"relative",display:"flex",flexDirection:"column",justifyContent:"center",height:"1.25rem",color:t?"trueblue.400":"gray.400",lineHeight:"1rem",fontWeight:"800",children:"---"})})},L=/^(---|___|—-)/,W=n.bP.create({name:"sectionBreak",group:"block",atom:!0,selectable:!0,draggable:!0,parseHTML:()=>[{tag:"hr"}],renderHTML(e){let{HTMLAttributes:t}=e;return["hr",(0,n.KV)(t)]},addNodeView:()=>(0,D.gu)(F),addInputRules(){return[(0,V.wN)({find:L,type:this.type})]}});var H=r(86812),Y=r(64895),J=r(33201),X=r(63867),K=r(97255);let q=new X.k_({props:{decorations:e=>{let{doc:t}=e,r=[],n=1;return t.descendants((e,t)=>{"card"===e.type.name&&(r.push(K.NZ.node(t,t+e.nodeSize,{},{number:n,isSectionCardPluginDecoration:!0})),n++)}),0==r.length?K.zF.empty:K.zF.create(t,r)}}}),Z=e=>{let t=e.find(e=>e.spec.isSectionCardPluginDecoration);return t?t.spec:{number:0,isSectionCardPluginDecoration:!0}};var Q=r(28144),$=r(94283),ee=r(49377),et=r(58972),er=r(79596),en=r(1069),ea=r(8972),ei=r(20644),eo=r(35908),es=r(25938),el=r(99492),ed=r(48621),ec=r(80910),eu=r(19564),ex=r(77650),ep=r(55729),em=r(3487),eg=r(83370),eh=r(15342),eb=r(29608),ef=r(30892);let ej={r:235,g:248,b:255},ey={r:255,g:245,b:255},ev={r:107,g:70,b:193},ew={r:43,g:108,b:176},eC=(e,t,r,n)=>n?{bg:"gray.100",text:"gray.600"}:{bg:(0,ef.tV)(ej,ey,e/Math.min(r,t)),text:(0,ef.tV)(ew,ev,e/Math.min(r,t))},ek=e=>{let{decorations:t,editor:r,getPos:n}=e,{number:a}=Z(t),i=(0,eh.GV)(eg.yR),{maxCards:o,canUpgrade:s}=(0,em.Zq)(),l=a>o,d=a===i,c=eC(a,i,o,l),u=(0,ep.useCallback)(()=>{let e=n(),t=r.view.state.doc.nodeAt(e);if(!t)return void console.error("[SectionCardView] Cannot append card. Node unknown");let a=e+t.nodeSize;r.chain().insertContentAt(a,{type:"card",content:[{type:"paragraph"}]}).focus().selectInsertedNode().run()},[r,n]),x=(0,ep.useCallback)(()=>{r.commands.selectNodeAtPos(n())},[r,n]),p=(0,ep.useCallback)(()=>{let e=n(),t=r.view.state.doc.nodeAt(e);if(!t)return void console.error("[SectionCardView] Cannot delete card. Node unknown");r.chain().deleteRange({from:e,to:e+t.nodeSize}).selectInsideNodeAtPos(e).focus().run()},[r,n]),m=(0,ep.useCallback)(()=>{let e=n();if(!r.view.state.doc.nodeAt(e))return void console.error("[SectionCardView] Cannot focus card. Node unknown");r.chain().selectInsideNodeAtPos(e).focus().run()},[r,n]),g=(0,k.DM)(t);return(0,O.jsxs)(D.VR,{role:"group",children:[(0,O.jsxs)(Q.z,{className:"card",border:"1px solid",borderColor:g?"var(--chakra-ring-color)":"blackAlpha.100",shadow:"sm",_hover:{shadow:"md"},transitionProperty:"box-shadow",transitionDuration:"normal",bg:"white",borderRadius:"md",spacing:0,align:"stretch","data-selection-ring":!0,pos:"relative",my:3,mt:1===a?0:void 0,role:"group",children:[!(0,eb.Xb)()&&(0,O.jsx)(z.az,{position:"absolute",color:c.text,zIndex:"1",top:"3.5",insetStart:"0",pointerEvents:"none",opacity:"0",_groupHover:{opacity:.75},children:(0,O.jsx)(ed.g,{icon:el.IMq,fixedWidth:!0})}),l&&(0,O.jsx)(z.jl,{size:"6px",position:"absolute",zIndex:"2",top:"1.5",left:"1.5",bg:"sunglow.400"}),(0,O.jsx)(ec.Tz,{label:l&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)($.E,{children:[(0,O.jsx)(eu.x6,{id:"rayOuP"})," "]}),(0,O.jsx)($.E,{color:"gray.400",children:s?(0,O.jsx)(eu.x6,{id:"W8sobv",values:{MAX_CARDS_PRO:em.t}}):(0,O.jsx)(eu.x6,{id:"yLG7qf"})})]}),placement:"top",children:(0,O.jsx)(ee.s,{dir:"column",align:"start",justify:"center",pe:1,ps:2,py:{base:3.5,md:4},w:12,cursor:l?"help":"grab","data-drag-handle":!0,contentEditable:!1,onClick:x,fontSize:a>=100?"xs":"sm",fontFamily:"mono",fontWeight:"600",borderLeftRadius:"inherit",userSelect:"none",transitionProperty:"filter",transitionDuration:"normal",_hover:{filter:"brightness(0.95)"},bg:c.bg,color:c.text,children:a})}),(0,O.jsx)(z.az,{p:{base:"0.75em",md:"1em"},flex:1,color:l?"gray.600":void 0,position:"relative",children:(0,O.jsx)(D.$p,{})}),(0,O.jsx)(eN,{addCard:u,focusCard:m,deleteCard:p})]}),!(0,eb.Xb)()&&!d&&(0,O.jsx)(eA,{addCard:u})]})},eA=(0,ep.memo)(e=>{let{addCard:t}=e;return(0,O.jsxs)(ee.s,{w:"100%",h:1,borderRadius:"md",bg:"trueblue.200",transitionProperty:"opacity",transitionDuration:"slow",opacity:0,_hover:{opacity:1},_focusWithin:{opacity:1},contentEditable:!1,my:1,dir:"column",align:"center",justify:"center",pos:"absolute",transform:"translateY(-0.75rem)",zIndex:1,children:[(0,O.jsx)(z.az,{pos:"absolute",top:-2,bottom:-2,insetStart:0,insetEnd:0}),(0,O.jsx)(ec.Tz,{placement:"top",label:ex.Ru._({id:"sFY+gw"}),shortcut:"---",children:(0,O.jsx)(et.K,{pos:"absolute",variant:"solid",icon:(0,O.jsx)(ed.g,{icon:el.QLR}),"aria-label":"Add card",isRound:!0,size:"xs",onClick:t,tabIndex:-1})})]})});eA.displayName="CardDivider";let eN=(0,ep.memo)(e=>{let{addCard:t,deleteCard:r,focusCard:n}=e;return(0,O.jsx)(Q.z,{pe:{base:2,md:2.5},pt:{base:2,md:3},alignSelf:"start",children:(0,eb.Xb)()?(0,O.jsx)(er.W,{children:e=>{let{onClose:a}=e;return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(en.I,{onClick:n,as:et.K,colorScheme:"gray",variant:"ghost",size:"sm",icon:(0,O.jsx)(ed.g,{icon:el.Dwc,fixedWidth:!0})}),(0,O.jsx)(ea.Z,{children:(0,O.jsxs)(ei.c,{zIndex:"tooltip",children:[(0,O.jsx)(eo.D,{onClick:()=>{a(),t()},icon:(0,O.jsx)(ed.g,{icon:el.JHe,fixedWidth:!0}),children:(0,O.jsx)(eu.x6,{id:"90n2YU"})}),(0,O.jsx)(es.N,{}),(0,O.jsx)(eo.D,{onClick:()=>{r(),a()},color:"red",icon:(0,O.jsx)(ed.g,{icon:el.sjs,fixedWidth:!0}),children:(0,O.jsx)(eu.x6,{id:"nabda1"})})]})})]})}}):(0,O.jsx)(ec.Tz,{label:(0,O.jsx)(eu.x6,{id:"nabda1"}),placement:"top",children:(0,O.jsx)(et.K,{colorScheme:"gray",variant:"ghost",opacity:"0",_groupHover:{opacity:1},_focus:{opacity:1},transitionProperty:"opacity",transitionDuration:"slow",size:"sm",onClick:r,"aria-label":ex.Ru._({id:"nabda1"}),icon:(0,O.jsx)(ed.g,{icon:el.sjs,fixedWidth:!0})})})})});eN.displayName="CardActions";let eM=/^(---|___|—-)$/,eP=n.bP.create({name:"card",content:"block+",selectable:!0,draggable:!0,isolating:!0,parseHTML:()=>[{tag:"section"}],renderHTML(e){let{HTMLAttributes:t}=e;return["section",(0,n.KV)(t),0]},addNodeView:()=>(0,D.gu)(ek),addProseMirrorPlugins:()=>[q],addInputRules:()=>[new n.fV({find:eM,handler:e=>{let{state:t,range:r}=e,{tr:n}=t;(0,H.S)({tr:n.deleteRange(r.from,r.to),dispatch:!0})}})],addKeyboardShortcuts(){return{Backspace:()=>this.editor.commands.mergeCardsOnDelete(!1),Delete:()=>this.editor.commands.mergeCardsOnDelete(!0),Tab:()=>this.editor.commands.selectNextCard(!0),"Shift-Tab":()=>this.editor.commands.selectNextCard(!1)}},addCommands:()=>({selectNextCard:e=>t=>{let{state:r,dispatch:a,commands:i}=t;if(!a)return!0;let{selection:o}=r,s=(0,n.KP)(J.jg)(o);if(!s||!o.empty)return!1;let l=r.doc.resolve(s.pos),d=l.index();if(e){if(d===l.parent.childCount-1)return!1;i.selectInsideNodeAtPos(s.pos+s.node.nodeSize)}else{if(0===d)return!1;let e=l.posAtIndex(d-1);i.selectInsideNodeAtPos(e)}return!0},mergeCardsOnDelete:e=>t=>{let{tr:r,state:a,dispatch:i}=t;if(!i)return!0;let{selection:o}=a,s=(0,n.KP)(J.jg)(o);if(!s||!o.empty)return!1;try{if(!(0,Y.jF)(o,e))return!1;return e?(0,Y.Uc)(s.pos,r,a):(0,Y.c9)(s.pos,r)}catch(e){return console.debug("[CardCommands] mergeCardsOnDelete failed",e),!1}}})});var e_=r(73320);let eR=[d.B,g.a,x.f,p.E,f.Hf,l.D,a.yN,m.z,c.J2,u.Ay.configure({openOnClick:!1}),y.B8,j.D,v.R,A.a,h.B,s.v,o.Q.configure({color:"var(--chakra-colors-trueblue-200)",width:3,class:"ProseMirror-dropcursor"}),k.bU,U,C.Q8,w.p],eD=e=>[...eR,(null==e?void 0:e.hideSectionBreaks)?W.extend({addNodeView:()=>(0,e_.gu)(B),addInputRules:()=>[]}):W,i.y.extend({content:"block+"})],eE=(e,t)=>"freeform"==t?e.replaceAll("\n---\n",""):e,eS=[...eR,eP,i.y.extend({content:"card+"})],eO=(e,t)=>{let r=(0,n._w)("freeform"===t?eD({hideSectionBreaks:!1}):eS);return"structured"===t&&(e=e.split("<hr>").map(e=>"<section>".concat(e,"</section>")).join("\n")),(0,b.S)(e,r)}},17206:(e,t,r)=>{r.d(t,{n:()=>V,j:()=>B});var n=r(6029),a=r(8972),i=r(49377),o=r(38859),s=r(29328),l=r(94283),d=r(40313),c=r(75846),u=r(99492),x=r(48621),p=r(55729),m=r(5061),g=r(15342),h=r(43634),b=r(29608),f=r(28615),j=r(11403),y=r(6807),v=r(85732),w=r(68986),C=r(19564),k=r(95578),A=r(70006),N=r(99038),M=r(88131),P=r(67604),_=r(75916),R=r(86025),D=r(88608),E=r(95889),S=r(18341),O=r(74003),z=r(86992),I=r(14322),T=r(65148);let G=[{Component:()=>{let e=(0,k.u)("outageButterbar");if(!e.enabled)return null;let{header:t,text:r,buttonLink:a,buttonText:i,key:o,pathnameRegexp:s}=e;return(0,n.jsx)(B,{definition:{key:o,header:t,text:r,buttonText:i,buttonLink:a,conditions:()=>!s||null!==window.location.pathname.match(new RegExp(s))}})},key:"outage-butterbar"},{Component:()=>"NORMAL"===(0,k.u)("openAiStatus")?null:(0,n.jsx)(B,{definition:{key:"ai-service-status",header:(0,n.jsx)(C.x6,{id:"1Agl06"}),text:(0,n.jsx)(C.x6,{id:"cCl6WD"}),ttl:86400,conditions:()=>(0,A.a5)(window.location.pathname)}}),key:"ai-service-status-butterbar"},{Component:()=>{var e,t,r;let{user:a,currentWorkspace:i}=(0,S.ur)(),{subscription:o,product:s}=(0,O.I)(),{launchFailedPaymentFlow:l,failedPaymentFlowEnabled:d}=(0,R.yf)({subscription:o,workspace:i,autoLaunch:!1});if(!o||!s)return null;let{name:c,dontChurnMessage:u}=(0,z.Ok)()[s],{status:x,expirationTime:p,id:m}=o,g=(0,D.Yq)(p,"MMMM do, yyyy"),h=(null==o||null==(e=o.createdByUser)?void 0:e.id)===(null==a?void 0:a.id),b=(0,I.AY)(),f=p>Date.now();if("unpaid"!==x&&"past_due"!==x&&!f)return null;let j=b&&(h||!(null==o?void 0:o.createdByUser))?(0,n.jsx)(C.x6,{id:"velw1T",values:{expirationFormatted:g,GAMMA_PROPER_NOUN:N.On,productName:c},components:{0:(0,n.jsx)(M.N,{href:d?void 0:b,onClick:d?l:void 0,isExternal:!0,textDecoration:"underline"})}}):(0,n.jsx)(C.x6,{id:"9aBOfk",values:{expirationFormatted:g,GAMMA_PROPER_NOUN:N.On,productName:c,0:null==(t=o.createdByUser)?void 0:t.displayName,1:null==(r=o.createdByUser)?void 0:r.email},components:{0:(0,n.jsx)("b",{}),1:(0,n.jsx)("b",{})}});return(0,n.jsx)(B,{definition:{key:"payment-overdue-".concat(m),header:(0,n.jsx)(C.x6,{id:"Lac1Vj",values:{GAMMA_PROPER_NOUN:N.On,productName:c}}),text:(0,n.jsxs)(n.Fragment,{children:[u," ",j]}),buttonText:(0,n.jsx)(C.x6,{id:"WLvqZR"}),buttonLink:d?void 0:b,buttonOnClick:d?l:void 0}})},key:"payment-overdue-butterbar"},{Component:()=>{let{subscription:e,openUpsellModal:t}=(0,O.I)();if(!e)return null;let{status:r,expirationTime:a,id:i}=e;if(!(new Date>(0,P.A)(a)&&new Date<(0,_.A)((0,P.A)(a),{days:10})))return null;let o=()=>t({segmentEvent:E.VV.GAMMA_PRO_UPSELL_SUBSCRIPTION_EXPIRED_BUTTERBAR}),s=(0,n.jsx)(M.N,{onClick:o,isExternal:!0,textDecoration:"underline",children:(0,n.jsx)(C.x6,{id:"mj68q/"})});return(0,n.jsx)(B,{definition:{key:"subscription-expired-".concat(i),header:(0,n.jsx)(C.x6,{id:"0hHZEf",values:{GAMMA_PROPER_NOUN:N.On}}),text:(0,n.jsxs)(n.Fragment,{children:["unpaid"===r||"past_due"===r?(0,n.jsx)(C.x6,{id:"QdgXJv"}):""," ",s]}),buttonText:(0,n.jsx)(C.x6,{id:"kwkhPe"}),buttonOnClick:o}})},key:"subscription-expired-butterbar"},{Component:()=>{var e,t,r;let{user:a}=(0,S.ur)(),{subscription:i,product:o}=(0,O.I)();if(!i||!o)return null;let{status:s,expirationTime:l,id:d,cancellationRequestedTime:c}=i;if(!("canceled"!=s&&c&&new Date<(0,P.A)(l)&&new Date>(0,_.A)((0,P.A)(l),{days:-7})))return null;let u=(null==i||null==(e=i.createdByUser)?void 0:e.id)===(null==a?void 0:a.id),x=(0,I.AY)(),p=(0,D.Yq)(l,"MMMM do, yyyy"),{name:m,dontChurnMessage:g}=(0,z.Ok)()[o],h=!u&&(null==i?void 0:i.createdByUser)?(0,n.jsx)(C.x6,{id:"z4DeyC",values:{expirationFormatted:p,GAMMA_PROPER_NOUN:N.On,productName:m,0:null==(t=i.createdByUser)?void 0:t.displayName,1:null==(r=i.createdByUser)?void 0:r.email},components:{0:(0,n.jsx)("b",{}),1:(0,n.jsx)("b",{})}}):(0,n.jsx)(C.x6,{id:"qP91+f",values:{expirationFormatted:p,GAMMA_PROPER_NOUN:N.On,productName:m},components:{0:(0,n.jsx)(M.N,{href:x,isExternal:!0,textDecoration:"underline"})}});return(0,n.jsx)(B,{definition:{key:"subscription-ending-soon-".concat(d),header:(0,n.jsx)(C.x6,{id:"66dedh",values:{GAMMA_PROPER_NOUN:N.On,productName:m}}),text:(0,n.jsxs)(n.Fragment,{children:[g," ",h]}),buttonText:(0,n.jsx)(C.x6,{id:"3jHA5d"}),buttonLink:x}})},key:"upcoming-cancellation-butterbar"},{key:"tablet-browser-warning",header:(0,n.jsx)(C.x6,{id:"JAtlMu",values:{GAMMA_PROPER_NOUN:N.On}}),text:(0,n.jsx)(C.x6,{id:"9JlCFS",values:{GAMMA_PROPER_NOUN:N.On}}),conditions:()=>(0,b.Pg)(),dismissKey:T.E.lastDismissedPreferredBrowserMessage},{key:"desktop-browser-warning",header:(0,n.jsx)(C.x6,{id:"3S0+Wy",values:{GAMMA_PROPER_NOUN:N.On}}),text:(0,n.jsx)(C.x6,{id:"Tf7VpJ"}),conditions:()=>U()&&(0,b.bh)(),dismissKey:T.E.lastDismissedPreferredBrowserMessage}],U=()=>(0,b.z3)()||!(0,b.H8)()&&!(0,b.nr)()&&!(0,b.yE)(),V=e=>{let{isViewOnly:t}=e,r=(0,j.En)(),o=(0,g.GV)(h.VJ);if(t||!r||(0,b.rA)()||f.D1||(0,v.NF)()||o)return null;let s=G.map(e=>"Component"in e?(0,n.jsx)(e.Component,{},e.key):(0,n.jsx)(B,{definition:e},e.key));return(0,n.jsx)(a.Z,{children:(0,n.jsx)(i.s,{"data-testid":"butterbar",direction:"column",top:2,pos:"absolute",zIndex:"toast",sx:{"> *:not(:first-child)":{display:"none"}},children:s})})},B=e=>{let{definition:t}=e,r=(0,m.fW)(),{key:a,dismissKey:g="butterbar-dismiss-".concat(a),header:h,text:b,buttonText:f,buttonLink:j,buttonOnClick:v=j?()=>window.open(j,"_blank"):void 0,conditions:C,ttl:k}=t,[A,N]=(0,y.M)(g,!1);if((0,p.useEffect)(()=>{if(k&&A)new Date().getTime()-new Date(A).getTime()>1e3*k&&w.x.removeItem(g)},[g,A,k]),C&&!C()||A)return null;let M=f&&v;return(0,n.jsxs)(o.F,{gap:4,position:"fixed",insetStart:"50%",transform:"translateX(".concat(r?"50%":"-50%",")"),shadow:"lg",width:{base:"calc(100% - 1rem)",md:"auto"},flexDirection:{base:"column",lg:"row"},alignItems:{base:"flex-start",lg:"center"},colorScheme:"highlight-flamingo",variant:"solid",children:[(0,n.jsxs)(s.B,{spacing:0,flex:1,pe:{base:12,lg:0},children:[(0,n.jsx)(l.E,{fontWeight:"bold",children:h}),(0,n.jsx)(l.E,{opacity:"0.7",fontSize:"xs",children:b})]}),M&&(0,n.jsx)(d.$,{flexShrink:0,variant:"plain",size:"sm",rightIcon:j?(0,n.jsx)(x.g,{icon:u.Ju_}):void 0,onClick:v,children:f}),(0,n.jsx)(i.s,{alignSelf:"flex-start",position:{base:"absolute",lg:"static"},insetEnd:4,top:4,children:(0,n.jsx)(c.J,{variant:"solid-alert",size:"sm",onClick:()=>{N(String(new Date))}})})]})}},25854:(e,t,r)=>{r.d(t,{B:()=>k,K:()=>A});var n=r(6029),a=r(49377),i=r(31922),o=r(40313),s=r(3632),l=r(99492),d=r(48621),c=r(19564),u=r(73320),x=r(29452),p=r.n(x),m=r(55729),g=r(15342),h=r(41896),b=r(95081),f=r(63255),j=r(83370),y=r(77093),v=r(11845),w=r(42343);let C={...b.q,...y.X,...f.X0},k="ai-card-editor",A=(0,m.memo)(e=>{let{...t}=e,r=(0,g.GV)(j.n7),s=(0,u.hG)({...t,extensions:v.CJ,editorProps:{attributes:{"data-testid":"ai-content-editor"}}});s&&(s.editorId=k);let x=(0,g.GV)(j.qo),b=(0,g.GV)(j.yR);(0,m.useEffect)(()=>{s&&s.setEditable(!r)},[r,s]);let f=(0,m.useCallback)(()=>{null==s||s.chain().insertContentAt(null==s?void 0:s.state.doc.content.size,{type:"card",content:[{type:"paragraph"}]}).selectInsertedNode().run()},[s]);return(0,w.X)(s),(0,n.jsxs)(a.s,{flex:"1",direction:"column",sx:C,p:{base:2,md:3},children:[(0,n.jsx)(h.$Z,{editor:s,style:{wordBreak:"break-word",display:"flex",flexDirection:"column"}}),r&&(0,n.jsx)(i.T,{children:p()(x-b).map(e=>(0,n.jsx)(N,{},e))}),!r&&(0,n.jsx)(o.$,{boxShadow:"none",leftIcon:(0,n.jsx)(d.g,{icon:l.QLR,fixedWidth:!0}),onClick:f,children:(0,n.jsx)(c.x6,{id:"sFY+gw"})})]})});A.displayName="AICardEditor";let N=()=>(0,n.jsx)(s.E,{height:14,width:"100%",borderRadius:"md"})},37471:(e,t,r)=>{r.d(t,{X0:()=>a,_2:()=>o,lW:()=>i});var n=r(55729);let a=["createWithAI","createGenerate","legacyGuidedMode","createPaste","createImport","promptEditor","home"],i=(0,n.createContext)({goToScreen:()=>{throw Error("goToScreen not available. Did you forget to wrap your component in RouterNavigationContext?")},onDocGenerationLoaded:()=>{},navEnabled:!0,webpageOnly:!1,skipThemeStep:!1}),o=()=>(0,n.useContext)(i)},42343:(e,t,r)=>{r.d(t,{X:()=>o});var n=r(55729),a=r(12733),i=r(18341);let o=e=>{let{currentWorkspace:t}=(0,i.ur)(),r=null==t?void 0:t.id;(0,n.useEffect)(()=>{e&&!e.isDestroyed&&r&&e.commands.initializeUploadExtension(r)},[e,r]),(0,a.W)(e)}},70027:(e,t,r)=>{r.d(t,{Tx:()=>o,pY:()=>s});var n=r(6029),a=r(55729);let i=a.createContext({});function o(){return(0,a.useContext)(i)}let s=e=>{let{children:t}=e,r=a.useRef();return(0,n.jsx)(i.Provider,{value:{setEditorInstance:e=>{r.current=e},getEditorInstance:()=>r.current},children:t})}},70557:(e,t,r)=>{r.d(t,{R7:()=>v,T7:()=>y,b2:()=>h,jQ:()=>g,lF:()=>f,ow:()=>C,pm:()=>b,sC:()=>j});var n=r(55729),a=r(37471),i=r(70027),o=r(88586),s=r(34394),l=r(15342),d=r(53615),c=r(90010),u=r(92124),x=r(25854),p=r(11845),m=r(83370);let g=()=>{let e=(0,l.CU)(),t=(0,l.jL)(),[r]=(0,o.zb6)();return(0,n.useCallback)(async()=>{var n;let a=(0,m.cK)(e.getState()).id,i=null==(n=(await r({variables:{docGenerateInputId:a,input:{}}})).data)?void 0:n.updateDocGenerationDraftInput;i&&i.draftInput&&a!==i.draftInput.id&&t((0,m.Jv)(i))},[t,e,r])},h=e=>{var t;let r=(0,l.CU)(),a=(0,l.jL)(),[i]=(0,o.zb6)(),s=(0,n.useCallback)(async e=>{var t;let n=(0,m.gG)(r.getState()),o=(0,m.nY)(r.getState());if(!n||!o)return;let{format:s,...l}=e,d={format:s,...l},c=(0,m._y)(r.getState());d.settings&&(d.settings={...c,...d.settings});let u=(0,m.nY)(r.getState()),x=null==(t=(await i({variables:{docGenerateInputId:o,input:d}})).data)?void 0:t.updateDocGenerationDraftInput;x&&x.draftInput&&u!==x.draftInput.id&&a((0,m.Jv)(x))},[a,r,i]),d=(0,u.lW)(s,null!=(t=null==e?void 0:e.debounce)?t:0);return(0,n.useCallback)(function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];a((0,m.Yo)(e)),t&&d(e)},[d,a])},b=()=>{let e=h(),t=(0,l.GV)(m.wS),[r,i]=v("styleTemplate"),o=(0,n.useCallback)(function(t){let r=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=(0,c.zY)(t).styleTemplates[0];e({format:t,settings:{styleTemplate:n}},r)},[e]),{webpageOnly:s}=(0,a._2)();return(0,n.useEffect)(()=>{s&&"webpage"!==t&&o("webpage")},[t,s,o,r,i]),{format:t,styleTemplate:r,setFormat:o,setStyleTemplate:i}},f=()=>{let e=h({debounce:500}),t=(0,n.useCallback)(function(t){let r=!(arguments.length>1)||void 0===arguments[1]||arguments[1];e({prompt:t},r)},[e]);return[(0,l.GV)(m.fg),t]},j=()=>{let[e,t]=w("themeId"),r=(0,l.GV)(m.u$),a=(0,l.jL)();return(0,n.useEffect)(()=>{e&&r.length>0&&!r.includes(e)&&a((0,m._W)([e,...r]))},[e,r,a]),[e,t]},y=()=>{let[e,t]=w("imageModel"),[r,a]=(0,s.ZQ)();return[(0,s.R5)(e),(0,n.useCallback)(e=>{t(e),a(e)},[t,a])]},v=(e,t)=>{if("imageModel"===e)throw Error("the imageModel generatorSetting must be loaded with useGeneratorAiImageModel");return w(e,t)},w=(e,t)=>{let r=h(t),a=(0,n.useCallback)(function(t){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1];r({settings:{[e]:t}},n)},[e,r]);return[(0,l.GV)((0,m.Wt)(e)),a]},C=e=>{let t=h(e),{getEditorInstance:r}=(0,i.Tx)();return(0,n.useCallback)(function(e){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1],a=arguments.length>2?arguments[2]:void 0,i=r();if(i){let t=i.editorId===x.B,r=(0,d.uY)(e),n=(0,p.ZC)(r,t?"structured":"freeform").content.toJSON(),o=i.chain().setContent(n);a&&o.focus(a),o.run()}t({content:e},n)},[t,r])}},75916:(e,t,r)=>{r.d(t,{A:()=>s});var n=r(65106),a=r(36486),i=r(34889),o=r(62123);function s(e,t){if((0,o.A)(2,arguments),!t||"object"!=typeof t)return new Date(NaN);var r="years"in t?(0,a.A)(t.years):0,s="months"in t?(0,a.A)(t.months):0,l="weeks"in t?(0,a.A)(t.weeks):0,d="days"in t?(0,a.A)(t.days):0,c="hours"in t?(0,a.A)(t.hours):0,u="minutes"in t?(0,a.A)(t.minutes):0,x="seconds"in t?(0,a.A)(t.seconds):0,p=(0,i.A)(e),m=s||r?function(e,t){(0,o.A)(2,arguments);var r=(0,i.A)(e),n=(0,a.A)(t);if(isNaN(n))return new Date(NaN);if(!n)return r;var s=r.getDate(),l=new Date(r.getTime());return(l.setMonth(r.getMonth()+n+1,0),s>=l.getDate())?l:(r.setFullYear(l.getFullYear(),l.getMonth(),s),r)}(p,s+12*r):p;return new Date((d||l?(0,n.A)(m,d+7*l):m).getTime()+1e3*(x+60*(u+60*c)))}},77093:(e,t,r)=>{r.d(t,{X:()=>i});var n=r(66849),a=r(2067);let i={".ProseMirror":{flex:1,...n.F,...a.p},".block":{my:"0.5rem","&.first-block":{mt:"0px !important"},"&.last-block":{mb:"0px !important"}},".block-heading":{fontWeight:"bold",lineHeight:"1.125",_first:{mt:0}},h1:{fontSize:"1.4em"},h2:{fontSize:"1.2em"},h3:{fontSize:"1.1em"},"a[href]":{color:"var(--chakra-colors-trueblue-600)",textDecoration:"underline"}}},79096:(e,t,r)=>{r.d(t,{B:()=>d});var n=r(22905),a=r(63867),i=r(28700),o=r(53615),s=r(98308),l=r(50535);let d=n.YY.create({name:"clipboardLight",addCommands:()=>({insertMarkdownAt:(e,t)=>r=>{let{state:n,tr:a}=r;try{let r=(0,o.os)(t,n.schema);return a.replaceRange(e.from,e.to,r),!0}catch(e){return console.warn("(caught) [Clipboard] insertMarkdownAt error",e),!1}}}),addProseMirrorPlugins(){let e=this.editor;return[new a.k_({key:new a.hs("clipboardLight"),props:{clipboardSerializer:{serializeFragment:t=>(0,l.t8)(t,e.schema)},handlePaste:(t,r,n)=>(0,o.D1)(e,r)||(0,i.j)(t,r,n),transformPastedHTML:e=>(0,s.V)(e)}})]}})}}]);
//# sourceMappingURL=9001-8b6b03130fe549bb.js.map